---
title: "클린 코드 리뷰: 실무에 적용하며 배운 것들"
date: 2024-10-28
summary: "로버트 마틴의 '클린 코드'를 읽고 실무에 적용하며 느낀 점과 핵심 원칙을 정리합니다."
tags: ["Book", "Clean Code", "Refactoring", "Best Practices"]
category: "book"
series: "개발 서적 리뷰"
---

## 책 소개

**클린 코드: 애자일 소프트웨어 장인 정신** (Clean Code: A Handbook of Agile Software Craftsmanship)
- 저자: 로버트 C. 마틴
- 출판: 2008년

"나중에 봐도 이해되는 코드"를 어떻게 작성할 것인가에 대한 실용적인 가이드입니다.

## 핵심 원칙과 실무 적용

### 1. 의미 있는 이름

> "이름은 의도를 드러내야 한다"

**Before:**
```java
public List<int[]> getThem() {
    List<int[]> list1 = new ArrayList<>();
    for (int[] x : theList) {
        if (x[0] == 4) list1.add(x);
    }
    return list1;
}
```

**After:**
```java
public List<Cell> getFlaggedCells() {
    List<Cell> flaggedCells = new ArrayList<>();
    for (Cell cell : gameBoard) {
        if (cell.isFlagged()) {
            flaggedCells.add(cell);
        }
    }
    return flaggedCells;
}
```

**실무 적용 경험:**
- 코드 리뷰에서 "이 변수가 뭐예요?"라는 질문이 사라짐
- 새 팀원 온보딩 시간 단축

### 2. 함수는 한 가지 일만

> "함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다."

**Before:**
```java
public void processOrder(Order order) {
    // 1. 유효성 검증
    if (order.getItems().isEmpty()) throw new InvalidOrderException();
    if (order.getUser() == null) throw new InvalidOrderException();
    
    // 2. 가격 계산
    BigDecimal total = BigDecimal.ZERO;
    for (Item item : order.getItems()) {
        total = total.add(item.getPrice().multiply(item.getQuantity()));
    }
    
    // 3. 할인 적용
    if (order.getCoupon() != null) {
        total = applyCoupon(total, order.getCoupon());
    }
    
    // 4. 결제 처리
    paymentService.process(order.getUser(), total);
    
    // 5. 이메일 발송
    emailService.sendOrderConfirmation(order);
}
```

**After:**
```java
public void processOrder(Order order) {
    validateOrder(order);
    BigDecimal total = calculateTotal(order);
    processPayment(order.getUser(), total);
    sendConfirmation(order);
}

private void validateOrder(Order order) { /* ... */ }
private BigDecimal calculateTotal(Order order) { /* ... */ }
private void processPayment(User user, BigDecimal amount) { /* ... */ }
private void sendConfirmation(Order order) { /* ... */ }
```

**실무 적용 경험:**
- 함수 분리 후 단위 테스트 작성이 쉬워짐
- 버그 발생 시 원인 특정이 빨라짐

### 3. 주석 대신 코드로 표현

> "주석은 실패를 만회하려는 노력이다"

**Before:**
```java
// 직원에게 복지 혜택을 받을 자격이 있는지 검사
if ((employee.flags & HOURLY_FLAG) && (employee.age > 65)) {
    // ...
}
```

**After:**
```java
if (employee.isEligibleForFullBenefits()) {
    // ...
}
```

**단, 유용한 주석도 있다:**
```java
// 정규표현식: 이메일 형식 검증
// RFC 5322 기준, 대부분의 실무 케이스 커버
private static final Pattern EMAIL_PATTERN = 
    Pattern.compile("^[A-Za-z0-9+_.-]+@(.+)$");

// TODO: 2024-Q2 까지 신규 결제 API로 마이그레이션 예정
// 관련 이슈: JIRA-1234
```

### 4. 에러 처리

> "오류 코드보다 예외를 사용하라"

**Before:**
```java
public int withdraw(int amount) {
    if (balance < amount) {
        return -1; // 잔액 부족
    }
    if (amount < 0) {
        return -2; // 잘못된 금액
    }
    balance -= amount;
    return 0; // 성공
}
```

**After:**
```java
public void withdraw(int amount) {
    if (amount < 0) {
        throw new IllegalArgumentException("출금액은 양수여야 합니다");
    }
    if (balance < amount) {
        throw new InsufficientBalanceException(balance, amount);
    }
    balance -= amount;
}
```

### 5. 경계 (Boundaries)

외부 라이브러리나 API와의 경계를 명확히:

```java
// ❌ 외부 라이브러리를 직접 사용
public class OrderService {
    private RedisTemplate<String, Object> redisTemplate;
    
    public void cacheOrder(Order order) {
        redisTemplate.opsForValue().set("order:" + order.getId(), order);
    }
}

// ✅ 래퍼로 감싸서 추상화
public class OrderService {
    private CacheService cacheService;
    
    public void cacheOrder(Order order) {
        cacheService.put("order:" + order.getId(), order);
    }
}
```

**장점:**
- 라이브러리 교체 시 영향 범위 최소화
- 테스트 시 Mock 주입 용이

## 책의 한계와 주의점

### 1. 맹목적 적용 금지

모든 원칙을 기계적으로 적용하면 오히려 복잡해질 수 있습니다.

```java
// 과도한 분리 예시
public void process() {
    step1();
}

private void step1() {
    step2();
}

private void step2() {
    doActualWork();
}
```

### 2. 팀 컨벤션과의 조화

책의 원칙보다 팀의 합의된 컨벤션이 우선입니다. 일관성이 더 중요합니다.

### 3. 2008년 책이라는 점

일부 예제와 패턴은 현재 관점에서 구식일 수 있습니다. 특히:
- 함수형 프로그래밍 관점 부족
- 최신 언어 기능 미반영

## 마무리: 실천 가이드

1. **점진적 적용**: 새로 작성하는 코드부터 적용
2. **리팩터링 기회 포착**: 버그 수정, 기능 추가 시 주변 코드 개선
3. **코드 리뷰 활용**: 팀원들과 함께 기준 정립
4. **보이스카우트 규칙**: "캠프장을 떠날 때보다 더 깨끗하게"

## 함께 읽으면 좋은 책

- 리팩터링 (마틴 파울러)
- 실용주의 프로그래머
- 테스트 주도 개발 (켄트 벡)
