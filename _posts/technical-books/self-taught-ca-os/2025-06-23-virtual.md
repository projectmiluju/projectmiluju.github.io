---
title: "Chapter14 가상 메모리"
excerpt: "혼자 공부하는 컴퓨터 구조 + 운영체제"

categories:
  - Self-Taught Computer Architecture and Operating Systems
tags:
  - [tag1, tag2]

permalink: /self-taught-ca-os/virtual/

toc: true
toc_sticky: true

date: 2025-06-23
last_modified_at: 2025-06-23
---


## 1 연속 메모리 할당

***

## 2 페이징을 통한 가상 메모리 관리

***

## 3 페이지 교체와 프레임 할당

> 가상 메모리를 통해 작은 물리 메모리보다 큰 프로세스도 실행할 수 있다고는 하지만, 여전히 물리 메모리의 크기는 제한적이다.     
> 운영체제는 프로세스들이 한정된 메모리를 효율적으로 이용할 수 있도록 기존에 메모리에 적재된 불필요한 페이지를 선별하여 보조기억 장치로 내보낼 수 있어야 하고,      
> 프로세스들에 적절한 수의 프레임을 할당하여 페이지를 할당할 수 있게 해야 한다.

***

### 요구 페이징

> 요구 페이징이란 프로세스를 메모리에 적재할 때 처음부터 모든 페이지를 적재하지 않고 필요한 페이지만을 메모리에 적재하는 기법이다.      
>> 1. CPU가 특정 페이지에 접근하는 명령어를 실핸한다.
>> 2. 해당 페이지가 현재 메모리에 있을 경우(유효 비트가 1일 경우) CPU는 페이지가 적재된 프레임에 접근한다.
>> 3. 해당 페이지가 현재 메모리에 없을 경우(유효 비트가 0일 경우) 페이지 폴트가 발생한다.
>> 4. 페이지 폴트 처리 루틴은 해당 페이지를 메모리로 적재하고 유효 비트를 1로 설정한다.
>> 5. 다시 1단계를 실행한다.

> 순수 요구 페이징
>> 아무런 페이지도 메모리에 적재하지 않은 채 무작정 프로세스를 실행하는 방식이다.     
>> 이 경우 프로세스의 첫 명령어를 실행하는 순간부터 페이지 폴트가 계속 발생한다.

> 요구 페이징 기법으로 페이지들을 적재하다 보면 언젠가 메모리가 가득 차게 된다.      
> 이때 운영체제는 메모리에 있는 페이지 중 하나를 보조기억 장치로 내보내야 한다.      
> 어떤 페이지를 내보내는 것이 최선일지 결정하는 방법이 페이지 교체 알고리즘이다.      

***

### 페이지 교체 알고리즘

> 메모리에 적재된 페이지를 다른 페이지로 교체해야 하는 상황에서 어떤 페이지를 제거할지 결정하는 방식이다.        
> 좋은 알고리즘: **페이지 폴트 수**가 적어야 한다.        
> 성능 판단 기준: **페이지 참조열**과 페이지 폴트 횟수

#### 대표적인 페이지 교체 알고리즘

> FIFO (First-In First-Out)
>> 가장 먼저 들어온 페이지를 먼저 제거한다.      
>> 단순하지만 최근 사용 여부를 반영하지 않아 비효율적일 수 있다.      
>> 예시 참조열: 2 3 1 3 5 2 4 2 3        
>> 페이지 폴트 수: 6회     

> 2차 기회 페이지 교체 알고리즘 (Second Chance)
>> FIFO 개선 버전이다.               
>> 페이지 제거 전 참조 비트(Reference Bit) 확인 → 1이면 기회를 한 번 더 준다.         
>> FIFO처럼 보이지만 사용 흔적이 있는 페이지는 뒤로 보낸다.       

> 최적(Optimal) 페이지 교체 알고리즘
>> 앞으로 가장 오래 사용되지 않을 페이지를 제거한다.     
>> 이론적으로 페이지 폴트 수가 가장 적다.       
>> 실제 구현은 어려워서 비교 기준으로 사용한다.        

> LRU (Least Recently Used) 페이지 교체 알고리즘
>> 가장 오랫동안 사용되지 않은 페이지를 제거한다. 
>> 실제로 많이 쓰이는 방식아다.     
>> 예시 참조열에서 FIFO는 6회 폴트, LRU는 3회로 더 적다.         

***

### 스레싱과 프레임 할당

#### 스레싱 (Thrashing)

> 페이지 폴트가 너무 자주 발생해 CPU가 계속 페이지 교체만 수행하는 상태이다.      
> 성능 급락, CPU 사용률이 낮다.

*** 

#### 프레임 할당 방식

> 균등 할당(Equal Allocation): 모든 프로세스에 동일한 수의 프레임 할당       
> 비례 할당(Proportional Allocation): 프로세스 크기에 비례하여 프레임 할당      
> 작업 집합 모델(Working Set Model): 최근 참조한 페이지 집합 기준으로 프레임 동적 할당     

