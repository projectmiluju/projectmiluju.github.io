---
title: " JPA의 ddl-auto 옵션은 각각 어떤 동작을 하고 어떤 상황에서 사용해야 할까?"
excerpt: "매일메일CS"

categories:
  - Back-end
tags:
  - [tag1, tag2]

permalink: /maeil-mail-backend/2/

toc: true
toc_sticky: true

date: 2025-03-28
last_modified_at: 2025-03-28
---

## JPA의 ddl-auto 옵션은 각각 어떤 동작을 하고 어떤 상황에서 사용해야 할까?

> ddl-auto 옵션은 스프링 부트 애플리케이션에서 Hibernate와 같은 JPA 구현체를 사용할 떄 데이터베이스 스키마 관리를 제어하는 설정이다.   
> `application.properties` 또는 `application.yml` 파일에서 설정할 수 있으며, 다양한 값에 따라 데이터베이스 스키마에 대해 다른 동작을 수행한다.   
> ddl-auto 옵션에는 `none` `validate` `update` `create` `create-drop` 등이 존재한다.   


***

## none

> 데이터베이스 스키마와 관련된 어떠한 작업도 수행하지 않는다.   
> 데이터베이스 스키마를 수동으로 관리하고 싶을 때 유용하며, 프로덕션 환경에서 주로 사용된다.

*** 

## validate

> 애플리케이션이 시작될 때, 엔티티 매핑이 데이터베이스 스키마와 일치하는지 검증하며 스키마 변경은 따로 수행하지 않는다.   
> 프로덕션 환경에서 엔티티와 데이터베이스 스키마가 일치하는지 확인하고 싶을 때 사용한다.


*** 

## update

> 엔티티 매핑과 데이터베이스 스키마를 비교하며 필요한 경우 스키마를 업데이트 한다.   
> 기존 데이터는 유지되지만, 새로운 엔티티나 변경된 엔티티 필드는 스키마에 반영된다.   
> 해당 옵션은 엔티티에 변경이 발생할 떄 자동으로 스키마를 업데이트하고 싶을 때 유용하다.   
> 프로덕션 환경에서는 예기치 않은 스키마 변경을 방지하기 위해 주의가 필요하다.

***

## create

> 애플리케이션이 시작될 때 기존 스키마를 삭제하고 새로 생성한다.   
> 데이터가 모두 삭제되며 엔티티 매핑을 기반으로 새로운 스키마가 생성된다.   
> 개발 초기에 빈 데이터베이스 스키마를 반복적으로 생성해야 할 때 유용하다.   
> 기존 데이터가 모두 삭제되므로 프로덕션 환경에서는 사용하지 않는다.

***

## create-drop

> `create`와 유사하지만, 애플리케이션이 종료될 때 스키마를 삭제한다는 점이 다르다.   
> 해당 옵션은 테스트 환경에서 일시적인 데이터베이스 스키마가 필요할 경우 유용하며, 매 테스트 실행 시마다 깨끗한 데이터베이스 상태를 유지하고자 할 때 사용된다.   
> 프로덕션 환경에서는 사용하지 않는다.

***

## 프로덕션 환경에서 스키마 변경은 어떻게 해야할까?

> 스키마 변경이 필요할 때는 적절한 데이터베이스 마이그레이션 도구를 사용하여 제어된 방식으로 스키마를 관리하거나, 사용자가 없는 새벽에 스키마 변경 작업을 수동으로 진행하는 것이 더욱 안전할 수 있다.

